<!DOCTYPE html>
<html lang="zh-CN">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Binance Testnet äº¤æ˜“æµ‹è¯•ç³»ç»Ÿ</title>

        <!-- CSSæ¡†æ¶ -->
        <link href="https://cdn.jsdelivr.net/npm/element-plus@2.4.4/dist/index.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

        <!-- CryptoJS åŠ å¯†åº“ -->
        <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.min.js"></script>

        <style>
            :root {
                --tech-blue: #00f3ff;
                --tech-blue-dark: #008b91;
                --tech-purple: #8a2be2;
                --tech-bg: #0a0a1a;
                --tech-panel: #11112a;
                --tech-panel-border: #00f3ff;
                --tech-text: #ffffff;
                --tech-text-secondary: #b0b0b0;
                --tech-success: #28a745;
                --tech-danger: #dc3545;
                --tech-warning: #ffc107;
            }

            body {
                font-family: 'Arial', sans-serif;
                background: var(--tech-bg);
                color: var(--tech-text);
                margin: 0;
                padding: 20px;
                background-image:
                    radial-gradient(circle at 10% 20%, rgba(0, 243, 255, 0.1) 0%, transparent 20%),
                    radial-gradient(circle at 90% 80%, rgba(138, 43, 226, 0.1) 0%, transparent 20%);
                min-height: 100vh;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
            }

            .header {
                text-align: center;
                margin-bottom: 30px;
                padding: 20px;
                background: var(--tech-panel);
                border: 1px solid var(--tech-panel-border);
                border-radius: 16px;
                box-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
            }

            .header h1 {
                color: var(--tech-blue);
                margin: 0;
                font-size: 2.5em;
            }

            .header .subtitle {
                color: var(--tech-text-secondary);
                margin-top: 10px;
            }

            .panel {
                background: var(--tech-panel);
                border: 1px solid var(--tech-panel-border);
                border-radius: 16px;
                padding: 20px;
                margin-bottom: 20px;
                box-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
            }

            .panel h2 {
                color: var(--tech-blue);
                margin-top: 0;
                border-bottom: 1px solid var(--tech-panel-border);
                padding-bottom: 10px;
            }

            .form-group {
                margin-bottom: 15px;
            }

            .form-group label {
                display: block;
                margin-bottom: 5px;
                color: var(--tech-text-secondary);
            }

            .form-group input,
            .form-group select {
                width: 100%;
                padding: 10px;
                border: 1px solid var(--tech-panel-border);
                border-radius: 8px;
                background: var(--tech-bg);
                color: var(--tech-text);
                box-sizing: border-box;
            }

            .btn {
                background: var(--tech-panel);
                border: 1px solid var(--tech-blue);
                color: var(--tech-blue);
                padding: 12px 24px;
                border-radius: 8px;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 0 5px rgba(0, 243, 255, 0.3);
                margin: 5px;
                font-weight: bold;
            }

            .btn:hover {
                background: var(--tech-blue);
                color: var(--tech-bg);
                box-shadow: 0 0 15px rgba(0, 243, 255, 0.5);
            }

            .btn-success {
                border-color: var(--tech-success);
                color: var(--tech-success);
            }

            .btn-success:hover {
                background: var(--tech-success);
                color: var(--tech-bg);
            }

            .btn-danger {
                border-color: var(--tech-danger);
                color: var(--tech-danger);
            }

            .btn-danger:hover {
                background: var(--tech-danger);
                color: var(--tech-bg);
            }

            .status {
                padding: 10px;
                border-radius: 8px;
                margin: 10px 0;
                font-weight: bold;
            }

            .status.success {
                background: rgba(40, 167, 69, 0.2);
                border: 1px solid var(--tech-success);
                color: var(--tech-success);
            }

            .status.error {
                background: rgba(220, 53, 69, 0.2);
                border: 1px solid var(--tech-danger);
                color: var(--tech-danger);
            }

            .status.info {
                background: rgba(0, 243, 255, 0.2);
                border: 1px solid var(--tech-blue);
                color: var(--tech-blue);
            }

            .result {
                background: var(--tech-bg);
                border: 1px solid var(--tech-panel-border);
                border-radius: 8px;
                padding: 15px;
                margin: 10px 0;
                font-family: monospace;
                white-space: pre-wrap;
                max-height: 300px;
                overflow-y: auto;
            }

            .grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
            }

            .api-info {
                background: rgba(0, 243, 255, 0.1);
                border: 1px solid var(--tech-blue);
                border-radius: 8px;
                padding: 15px;
                margin: 10px 0;
            }

            .api-info h3 {
                color: var(--tech-blue);
                margin-top: 0;
            }

            .api-info p {
                margin: 5px 0;
                color: var(--tech-text-secondary);
            }

            .api-info .highlight {
                color: var(--tech-blue);
                font-weight: bold;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <div class="header">
                <h1>ğŸš€ Binance Testnet äº¤æ˜“æµ‹è¯•ç³»ç»Ÿ</h1>
                <div class="subtitle">å®‰å…¨æµ‹è¯•ç¯å¢ƒ - ä½¿ç”¨è™šæ‹Ÿèµ„é‡‘è¿›è¡Œäº¤æ˜“æµ‹è¯•</div>
            </div>

            <!-- APIé…ç½®é¢æ¿ -->
            <div class="panel">
                <h2><i class="fas fa-key"></i> API é…ç½®</h2>

                <div class="api-info">
                    <h3>ğŸ”§ å…³é”®é…ç½®è¯´æ˜</h3>
                    <p><strong>Testnet API åœ°å€ï¼š</strong> <span class="highlight">https://testnet.binancefuture.com</span>
                    </p>
                    <p><strong>æ‚¨çš„ API Keyï¼š</strong> <span
                            class="highlight">BZGVVshdX8o6JCwChl9Nl0DuXVDASJO5coMsWNbUSKWkQXet5tmAKe2uGN74era5</span>
                    </p>
                    <p><strong>æ‚¨çš„ API Secretï¼š</strong> <span
                            class="highlight">qRkCTvWI72lSFO6budBDv1fIyddb8Ag2UVlarqFuB8Qv7QRu0bB9LL29o8QFNlaD</span>
                    </p>
                    <p><strong>è™šæ‹Ÿèµ„é‡‘ï¼š</strong> <span class="highlight">10ä¸‡ USDT</span> (Testnet é»˜è®¤)</p>
                </div>

                <div class="form-group">
                    <label for="apiKey">API Key:</label>
                    <input type="text" id="apiKey"
                        value="BZGVVshdX8o6JCwChl9Nl0DuXVDASJO5coMsWNbUSKWkQXet5tmAKe2uGN74era5"
                        placeholder="è¾“å…¥æ‚¨çš„API Key">
                </div>

                <div class="form-group">
                    <label for="apiSecret">API Secret:</label>
                    <input type="password" id="apiSecret"
                        value="qRkCTvWI72lSFO6budBDv1fIyddb8Ag2UVlarqFuB8Qv7QRu0bB9LL29o8QFNlaD"
                        placeholder="è¾“å…¥æ‚¨çš„API Secret">
                </div>

                <button class="btn btn-success" onclick="testApiConnection()">
                    <i class="fas fa-plug"></i> æµ‹è¯•APIè¿æ¥
                </button>
                <button class="btn" onclick="getAccountInfo()">
                    <i class="fas fa-wallet"></i> æŸ¥è¯¢è´¦æˆ·ä¿¡æ¯
                </button>
            </div>

            <!-- äº¤æ˜“æµ‹è¯•é¢æ¿ -->
            <div class="panel">
                <h2><i class="fas fa-chart-line"></i> äº¤æ˜“æµ‹è¯•</h2>

                <div class="grid">
                    <div>
                        <div class="form-group">
                            <label for="symbol">äº¤æ˜“å¯¹:</label>
                            <select id="symbol">
                                <option value="BTCUSDT">BTCUSDT</option>
                                <option value="ETHUSDT">ETHUSDT</option>
                                <option value="BNBUSDT">BNBUSDT</option>
                                <option value="SOLUSDT">SOLUSDT</option>
                                <option value="XRPUSDT">XRPUSDT</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="side">äº¤æ˜“æ–¹å‘:</label>
                            <select id="side">
                                <option value="BUY">ä¹°å…¥ (åšå¤š)</option>
                                <option value="SELL">å–å‡º (åšç©º)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="quantity">æ•°é‡:</label>
                            <input type="number" id="quantity" value="0.001" step="0.001" min="0.001"
                                placeholder="äº¤æ˜“æ•°é‡">
                        </div>

                        <div class="form-group">
                            <label for="orderType">è®¢å•ç±»å‹:</label>
                            <select id="orderType">
                                <option value="MARKET">å¸‚ä»·å•</option>
                                <option value="LIMIT">é™ä»·å•</option>
                            </select>
                        </div>

                        <div class="form-group" id="priceGroup" style="display: none;">
                            <label for="price">ä»·æ ¼:</label>
                            <input type="number" id="price" step="0.01" placeholder="é™ä»·å•ä»·æ ¼">
                        </div>
                    </div>

                    <div>
                        <button class="btn btn-success" onclick="placeOrder()">
                            <i class="fas fa-paper-plane"></i> ä¸‹å•æµ‹è¯•
                        </button>
                        <button class="btn" onclick="getOpenOrders()">
                            <i class="fas fa-list"></i> æŸ¥è¯¢æœªæˆäº¤è®¢å•
                        </button>
                        <button class="btn" onclick="getPositionRisk()">
                            <i class="fas fa-chart-bar"></i> æŸ¥è¯¢æŒä»“é£é™©
                        </button>
                        <button class="btn" onclick="getTradeHistory()">
                            <i class="fas fa-history"></i> æŸ¥è¯¢äº¤æ˜“å†å²
                        </button>
                        <button class="btn btn-danger" onclick="cancelAllOrders()">
                            <i class="fas fa-times"></i> æ’¤é”€æ‰€æœ‰è®¢å•
                        </button>
                    </div>
                </div>
            </div>

            <!-- çŠ¶æ€æ˜¾ç¤ºé¢æ¿ -->
            <div class="panel">
                <h2><i class="fas fa-info-circle"></i> æµ‹è¯•ç»“æœ</h2>
                <div id="status"></div>
                <div id="result"></div>
            </div>
        </div>

        <script>
            // Testnet APIé…ç½®
            const TESTNET_BASE_URL = 'https://testnet.binancefuture.com';
            const API_KEY = 'BZGVVshdX8o6JCwChl9Nl0DuXVDASJO5coMsWNbUSKWkQXet5tmAKe2uGN74era5';
            const API_SECRET = 'qRkCTvWI72lSFO6budBDv1fIyddb8Ag2UVlarqFuB8Qv7QRu0bB9LL29o8QFNlaD';

            // ç”Ÿæˆç­¾å
            function generateSignature(queryString, secret) {
                return CryptoJS.HmacSHA256(queryString, secret).toString();
            }

            // æ˜¾ç¤ºçŠ¶æ€
            function showStatus(message, type = 'info') {
                const statusDiv = document.getElementById('status');
                statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
            }

            // æ˜¾ç¤ºç»“æœ
            function showResult(data) {
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = `<div class="result">${JSON.stringify(data, null, 2)}</div>`;
            }

            // æµ‹è¯•APIè¿æ¥
            async function testApiConnection() {
                try {
                    showStatus('æ­£åœ¨æµ‹è¯•APIè¿æ¥...', 'info');

                    const timestamp = Date.now();
                    const queryString = `timestamp=${timestamp}`;
                    const signature = generateSignature(queryString, API_SECRET);

                    const url = `${TESTNET_BASE_URL}/fapi/v2/account?${queryString}&signature=${signature}`;

                    const response = await fetch(url, {
                        method: 'GET',
                        headers: {
                            'X-MBX-APIKEY': API_KEY
                        }
                    });

                    if (response.ok) {
                        const data = await response.json();
                        showStatus('âœ… APIè¿æ¥æˆåŠŸï¼', 'success');
                        showResult({
                            message: 'APIè¿æ¥æµ‹è¯•æˆåŠŸ',
                            accountInfo: {
                                totalWalletBalance: data.totalWalletBalance + ' USDT',
                                totalUnrealizedProfit: data.totalUnrealizedProfit + ' USDT',
                                totalMarginBalance: data.totalMarginBalance + ' USDT',
                                availableBalance: data.availableBalance + ' USDT'
                            }
                        });
                    } else {
                        const errorData = await response.json();
                        showStatus('âŒ APIè¿æ¥å¤±è´¥: ' + errorData.msg, 'error');
                        showResult(errorData);
                    }
                } catch (error) {
                    showStatus('âŒ è¿æ¥é”™è¯¯: ' + error.message, 'error');
                    showResult({ error: error.message });
                }
            }

            // è·å–è´¦æˆ·ä¿¡æ¯
            async function getAccountInfo() {
                try {
                    showStatus('æ­£åœ¨è·å–è´¦æˆ·ä¿¡æ¯...', 'info');

                    const timestamp = Date.now();
                    const queryString = `timestamp=${timestamp}`;
                    const signature = generateSignature(queryString, API_SECRET);

                    const url = `${TESTNET_BASE_URL}/fapi/v2/account?${queryString}&signature=${signature}`;

                    const response = await fetch(url, {
                        method: 'GET',
                        headers: {
                            'X-MBX-APIKEY': API_KEY
                        }
                    });

                    if (response.ok) {
                        const data = await response.json();
                        showStatus('âœ… è´¦æˆ·ä¿¡æ¯è·å–æˆåŠŸ', 'success');
                        showResult(data);
                    } else {
                        const errorData = await response.json();
                        showStatus('âŒ è·å–è´¦æˆ·ä¿¡æ¯å¤±è´¥: ' + errorData.msg, 'error');
                        showResult(errorData);
                    }
                } catch (error) {
                    showStatus('âŒ è·å–è´¦æˆ·ä¿¡æ¯é”™è¯¯: ' + error.message, 'error');
                    showResult({ error: error.message });
                }
            }

            // ä¸‹å•æµ‹è¯•
            async function placeOrder() {
                try {
                    const symbol = document.getElementById('symbol').value;
                    const side = document.getElementById('side').value;
                    const quantity = document.getElementById('quantity').value;
                    const orderType = document.getElementById('orderType').value;
                    const price = document.getElementById('price').value;

                    if (!quantity || quantity <= 0) {
                        showStatus('âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„äº¤æ˜“æ•°é‡', 'error');
                        return;
                    }

                    if (orderType === 'LIMIT' && (!price || price <= 0)) {
                        showStatus('âŒ é™ä»·å•è¯·è¾“å…¥æœ‰æ•ˆä»·æ ¼', 'error');
                        return;
                    }

                    showStatus('æ­£åœ¨ä¸‹å•...', 'info');

                    const timestamp = Date.now();
                    let queryString = `symbol=${symbol}&side=${side}&type=${orderType}&quantity=${quantity}&timestamp=${timestamp}`;

                    if (orderType === 'LIMIT') {
                        queryString += `&price=${price}&timeInForce=GTC`;
                    }

                    const signature = generateSignature(queryString, API_SECRET);

                    const url = `${TESTNET_BASE_URL}/fapi/v1/order?${queryString}&signature=${signature}`;

                    const response = await fetch(url, {
                        method: 'POST',
                        headers: {
                            'X-MBX-APIKEY': API_KEY
                        }
                    });

                    if (response.ok) {
                        const data = await response.json();
                        showStatus('âœ… ä¸‹å•æˆåŠŸï¼', 'success');
                        showResult({
                            message: 'ä¸‹å•æµ‹è¯•æˆåŠŸ',
                            orderInfo: data,
                            details: {
                                symbol: data.symbol,
                                side: data.side,
                                type: data.type,
                                quantity: data.origQty,
                                price: data.price || 'å¸‚ä»·',
                                status: data.status,
                                orderId: data.orderId
                            }
                        });
                    } else {
                        const errorData = await response.json();
                        showStatus('âŒ ä¸‹å•å¤±è´¥: ' + errorData.msg, 'error');
                        showResult(errorData);
                    }
                } catch (error) {
                    showStatus('âŒ ä¸‹å•é”™è¯¯: ' + error.message, 'error');
                    showResult({ error: error.message });
                }
            }

            // è·å–æœªæˆäº¤è®¢å•
            async function getOpenOrders() {
                try {
                    showStatus('æ­£åœ¨è·å–æœªæˆäº¤è®¢å•...', 'info');

                    const symbol = document.getElementById('symbol').value;
                    const timestamp = Date.now();
                    const queryString = `symbol=${symbol}&timestamp=${timestamp}`;
                    const signature = generateSignature(queryString, API_SECRET);

                    const url = `${TESTNET_BASE_URL}/fapi/v1/openOrders?${queryString}&signature=${signature}`;

                    const response = await fetch(url, {
                        method: 'GET',
                        headers: {
                            'X-MBX-APIKEY': API_KEY
                        }
                    });

                    if (response.ok) {
                        const data = await response.json();
                        showStatus('âœ… æœªæˆäº¤è®¢å•è·å–æˆåŠŸ', 'success');
                        showResult(data);
                    } else {
                        const errorData = await response.json();
                        showStatus('âŒ è·å–æœªæˆäº¤è®¢å•å¤±è´¥: ' + errorData.msg, 'error');
                        showResult(errorData);
                    }
                } catch (error) {
                    showStatus('âŒ è·å–æœªæˆäº¤è®¢å•é”™è¯¯: ' + error.message, 'error');
                    showResult({ error: error.message });
                }
            }

            // è·å–æŒä»“é£é™©
            async function getPositionRisk() {
                try {
                    showStatus('æ­£åœ¨è·å–æŒä»“é£é™©...', 'info');

                    const timestamp = Date.now();
                    const queryString = `timestamp=${timestamp}`;
                    const signature = generateSignature(queryString, API_SECRET);

                    const url = `${TESTNET_BASE_URL}/fapi/v2/positionRisk?${queryString}&signature=${signature}`;

                    const response = await fetch(url, {
                        method: 'GET',
                        headers: {
                            'X-MBX-APIKEY': API_KEY
                        }
                    });

                    if (response.ok) {
                        const data = await response.json();
                        showStatus('âœ… æŒä»“é£é™©è·å–æˆåŠŸ', 'success');
                        showResult(data);
                    } else {
                        const errorData = await response.json();
                        showStatus('âŒ è·å–æŒä»“é£é™©å¤±è´¥: ' + errorData.msg, 'error');
                        showResult(errorData);
                    }
                } catch (error) {
                    showStatus('âŒ è·å–æŒä»“é£é™©é”™è¯¯: ' + error.message, 'error');
                    showResult({ error: error.message });
                }
            }

            // è·å–äº¤æ˜“å†å²
            async function getTradeHistory() {
                try {
                    showStatus('æ­£åœ¨è·å–äº¤æ˜“å†å²...', 'info');

                    const symbol = document.getElementById('symbol').value;
                    const timestamp = Date.now();
                    const queryString = `symbol=${symbol}&limit=10&timestamp=${timestamp}`;
                    const signature = generateSignature(queryString, API_SECRET);

                    const url = `${TESTNET_BASE_URL}/fapi/v1/userTrades?${queryString}&signature=${signature}`;

                    const response = await fetch(url, {
                        method: 'GET',
                        headers: {
                            'X-MBX-APIKEY': API_KEY
                        }
                    });

                    if (response.ok) {
                        const data = await response.json();
                        showStatus('âœ… äº¤æ˜“å†å²è·å–æˆåŠŸ', 'success');
                        showResult(data);
                    } else {
                        const errorData = await response.json();
                        showStatus('âŒ è·å–äº¤æ˜“å†å²å¤±è´¥: ' + errorData.msg, 'error');
                        showResult(errorData);
                    }
                } catch (error) {
                    showStatus('âŒ è·å–äº¤æ˜“å†å²é”™è¯¯: ' + error.message, 'error');
                    showResult({ error: error.message });
                }
            }

            // æ’¤é”€æ‰€æœ‰è®¢å•
            async function cancelAllOrders() {
                try {
                    const symbol = document.getElementById('symbol').value;

                    if (!confirm(`ç¡®å®šè¦æ’¤é”€æ‰€æœ‰ ${symbol} çš„æœªæˆäº¤è®¢å•å—ï¼Ÿ`)) {
                        return;
                    }

                    showStatus('æ­£åœ¨æ’¤é”€æ‰€æœ‰è®¢å•...', 'info');

                    const timestamp = Date.now();
                    const queryString = `symbol=${symbol}&timestamp=${timestamp}`;
                    const signature = generateSignature(queryString, API_SECRET);

                    const url = `${TESTNET_BASE_URL}/fapi/v1/allOpenOrders?${queryString}&signature=${signature}`;

                    const response = await fetch(url, {
                        method: 'DELETE',
                        headers: {
                            'X-MBX-APIKEY': API_KEY
                        }
                    });

                    if (response.ok) {
                        const data = await response.json();
                        showStatus('âœ… æ‰€æœ‰è®¢å•æ’¤é”€æˆåŠŸ', 'success');
                        showResult(data);
                    } else {
                        const errorData = await response.json();
                        showStatus('âŒ æ’¤é”€è®¢å•å¤±è´¥: ' + errorData.msg, 'error');
                        showResult(errorData);
                    }
                } catch (error) {
                    showStatus('âŒ æ’¤é”€è®¢å•é”™è¯¯: ' + error.message, 'error');
                    showResult({ error: error.message });
                }
            }

            // è®¢å•ç±»å‹åˆ‡æ¢
            document.getElementById('orderType').addEventListener('change', function () {
                const priceGroup = document.getElementById('priceGroup');
                if (this.value === 'LIMIT') {
                    priceGroup.style.display = 'block';
                } else {
                    priceGroup.style.display = 'none';
                }
            });

            // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•è¿æ¥
            window.addEventListener('load', function () {
                showStatus('ğŸš€ Testnetäº¤æ˜“æµ‹è¯•ç³»ç»Ÿå·²å¯åŠ¨ï¼Œç‚¹å‡»"æµ‹è¯•APIè¿æ¥"å¼€å§‹æµ‹è¯•', 'info');
            });
        </script>
    </body>

</html>
