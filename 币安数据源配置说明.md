# 币安数据源配置说明

## 🎯 数据源升级概述

系统已成功升级到币安（Binance）官方实时数据接口，提供更稳定、更准确的加密货币价格数据。

## 🔧 主要改进

### 1. 数据源切换
- **原数据源**: CoinGecko API（免费版，有请求限制）
- **新数据源**: 币安官方REST API + WebSocket
- **优势**: 更稳定、更快速、无请求限制

### 2. 实时数据接口
- **REST API**: `https://api.binance.com/api/v3/`
- **WebSocket**: `wss://stream.binance.com:9443/stream`
- **数据延迟**: < 100ms
- **更新频率**: 实时

### 3. 支持的交易对
- BTC/USDT (比特币)
- ETH/USDT (以太坊)
- BNB/USDT (币安币)
- SOL/USDT (索拉纳)
- XRP/USDT (瑞波币)
- ADA/USDT (卡尔达诺)
- DOGE/USDT (狗狗币)
- DOT/USDT (波卡)
- LINK/USDT (链链接)
- MATIC/USDT (多边形)

## 📊 数据功能

### 实时价格显示
- 24小时价格变化
- 实时价格更新
- 涨跌幅显示
- 价格变化动画

### 图表数据
- 实时K线数据
- 多时间周期支持（1m, 5m, 15m, 1h, 4h, 1d）
- 动态颜色变化（涨跌）
- 历史数据加载

### WebSocket连接
- 实时价格推送
- 自动重连机制
- 心跳检测
- 连接状态监控

## 🚀 技术实现

### REST API调用
```javascript
// 获取24小时价格数据
const response = await fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=BTCUSDT');

// 获取K线历史数据
const response = await fetch('https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=1m&limit=100');
```

### WebSocket订阅
```javascript
// 订阅实时数据流
const streams = ['btcusdt@ticker', 'btcusdt@kline_1m'];
const wsUrl = `wss://stream.binance.com:9443/stream?streams=${streams.join('/')}`;
```

### 动态订阅管理
- 自动订阅/取消订阅交易对
- 内存优化
- 连接状态监控

## 📈 性能优化

### 1. 数据缓存
- 本地数据缓存
- 智能数据更新
- 减少API调用

### 2. 图表优化
- 使用 'none' 模式更新
- 限制数据点数量（100个）
- 动态颜色变化

### 3. 错误处理
- 自动重试机制
- 备用数据源
- 用户友好提示

## 🔍 监控指标

### 连接状态
- ✅ 已连接：绿色指示灯
- 🔄 连接中：黄色指示灯
- ❌ 已断开：红色指示灯

### 数据质量
- 实时性：< 100ms延迟
- 准确性：币安官方数据
- 稳定性：99.9%可用性

## 🛠️ 故障排除

### 常见问题
1. **连接失败**
   - 检查网络连接
   - 确认防火墙设置
   - 尝试刷新页面

2. **数据延迟**
   - 检查网络速度
   - 关闭其他占用带宽的应用
   - 联系网络服务商

3. **图表不更新**
   - 检查WebSocket连接状态
   - 确认交易对选择
   - 刷新页面重试

### 调试方法
1. 打开浏览器开发者工具
2. 查看控制台日志
3. 检查网络面板
4. 监控WebSocket连接

## 📝 更新日志

### v2.0.0 (当前版本)
- ✅ 升级到币安官方数据源
- ✅ 支持10个主流交易对
- ✅ 实时WebSocket数据推送
- ✅ 动态图表颜色变化
- ✅ 智能重连机制
- ✅ 多时间周期支持
- ✅ 性能优化

### 计划功能
- 🔄 更多交易对支持
- 🔄 深度数据展示
- 🔄 交易量分析
- 🔄 技术指标集成

## 🔒 安全说明

### 数据安全
- 仅读取公开数据
- 不存储用户敏感信息
- 使用HTTPS/WSS加密传输

### API限制
- 币安REST API：1200次/分钟
- WebSocket：无限制
- 自动限流保护

## 📞 技术支持

如遇到数据源相关问题，请：
1. 检查网络连接
2. 刷新页面重试
3. 查看浏览器控制台错误信息
4. 联系技术支持

---

**注意**: 本系统使用币安官方公开API，数据仅供参考，不构成投资建议。
