# 🚀 永续合约预测系统 - 实时数据功能

## 📋 功能概述

实时数据功能已经成功启用！系统现在支持：

- ✅ **WebSocket实时连接** - 实时价格数据推送
- ✅ **多交易所数据** - 币安、OKX、Bybit等
- ✅ **自动重连机制** - 网络中断时自动恢复
- ✅ **离线模式备用** - WebSocket断开时使用模拟数据

## 🎯 当前状态

### 服务状态
- **WebSocket服务器**: ✅ 运行中 (端口8000)
- **HTTP服务器**: ✅ 运行中 (端口8080)
- **实时数据连接**: ✅ 已启用

### 访问地址
- **主页面**: http://localhost:8080
- **WebSocket测试**: http://localhost:8080/websocket_test.html
- **WebSocket服务**: ws://localhost:8000/ws

## 🔧 如何使用

### 1. 查看实时数据状态
在主页面顶部，您会看到状态指示器：
- 🟢 **绿色**: 实时数据已连接
- 🟡 **黄色**: 离线模式（使用模拟数据）

### 2. 测试WebSocket连接
访问 http://localhost:8080/websocket_test.html 可以：
- 查看连接状态
- 监控实时数据流
- 测试重连功能

### 3. 监控实时价格
系统会自动更新：
- BTC/USDT 实时价格
- ETH/USDT 实时价格
- 多交易所价格对比
- 24小时涨跌幅

## 🛠️ 管理命令

### 启动服务
```bash
# 使用启动脚本
start_realtime.bat

# 或手动启动
# WebSocket服务器
cd backend && py minimal_server.py

# HTTP服务器
py -m http.server 8080
```

### 检查状态
```bash
# 运行状态检查
check_realtime_status.bat
```

### 停止服务
- 在对应的命令行窗口按 `Ctrl+C`
- 或关闭命令行窗口

## 📊 数据来源

### 实时数据
- **币安API**: 主要数据源
- **OKX API**: 备用数据源
- **Bybit API**: 备用数据源

### 模拟数据
当实时API不可用时，系统会使用模拟数据：
- 基于真实市场价格的模拟变化
- 保持数据格式一致性
- 确保界面正常显示

## 🔄 自动功能

### 重连机制
- 网络中断时自动重连
- 最多重试5次
- 重连间隔3秒

### 数据更新
- 实时数据：每5秒更新一次
- 模拟数据：每3秒更新一次
- 统计信息：每30秒更新一次

## 🚨 故障排除

### 问题：看不到实时数据
**解决方案**：
1. 检查WebSocket服务器是否运行
2. 运行 `check_realtime_status.bat`
3. 刷新浏览器页面
4. 检查浏览器控制台错误

### 问题：连接状态显示黄色
**原因**：WebSocket连接失败
**解决方案**：
1. 确保后端服务器正在运行
2. 检查防火墙设置
3. 重启WebSocket服务器

### 问题：数据更新缓慢
**解决方案**：
1. 检查网络连接
2. 重启WebSocket服务器
3. 清除浏览器缓存

## 📈 性能优化

### 推荐设置
- **浏览器**: Chrome/Firefox最新版本
- **网络**: 稳定的互联网连接
- **内存**: 至少2GB可用内存

### 监控指标
- WebSocket连接数
- 数据更新频率
- 响应时间
- 错误率

## 🎉 功能特色

1. **实时性**: 毫秒级数据更新
2. **可靠性**: 多重备用机制
3. **易用性**: 一键启动，自动管理
4. **可视化**: 直观的状态指示
5. **可扩展**: 支持更多交易对

---

**最后更新**: 2024年12月19日
**版本**: 1.0.0
**状态**: ✅ 正常运行
