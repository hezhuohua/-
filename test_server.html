<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ°¸ç»­åˆçº¦é¢„æµ‹ç³»ç»Ÿ - æœåŠ¡æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f7fa;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #5a6fd8; }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #667eea;
            background: #f8f9fa;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ æ°¸ç»­åˆçº¦é¢„æµ‹ç³»ç»Ÿ - æœåŠ¡çŠ¶æ€æ£€æµ‹</h1>
        
        <div class="info">
            <h3>ğŸ“‹ æœåŠ¡åœ°å€</h3>
            <ul>
                <li><strong>å‰ç«¯ç•Œé¢</strong>: <a href="http://localhost:8080" target="_blank">http://localhost:8080</a></li>
                <li><strong>åç«¯API</strong>: <a href="http://localhost:8000" target="_blank">http://localhost:8000</a></li>
                <li><strong>APIæ–‡æ¡£</strong>: <a href="http://localhost:8000/docs" target="_blank">http://localhost:8000/docs</a></li>
                <li><strong>å¥åº·æ£€æŸ¥</strong>: <a href="http://localhost:8000/health" target="_blank">http://localhost:8000/health</a></li>
            </ul>
        </div>

        <div class="warning">
            <h3>âš ï¸ å½“å‰çŠ¶æ€</h3>
            <p>å¦‚æœæ‚¨çœ‹åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¯´æ˜å‰ç«¯æ–‡ä»¶å¯ä»¥æ­£å¸¸è®¿é—®ã€‚ç°åœ¨éœ€è¦æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€ã€‚</p>
        </div>

        <h3>ğŸ”§ æœåŠ¡æµ‹è¯•</h3>
        <button onclick="testBackendHealth()">æµ‹è¯•åç«¯å¥åº·çŠ¶æ€</button>
        <button onclick="testMarketData()">æµ‹è¯•å¸‚åœºæ•°æ®API</button>
        <button onclick="testAuth()">æµ‹è¯•è®¤è¯API</button>
        <button onclick="startMockServer()">å¯åŠ¨æ¨¡æ‹ŸæœåŠ¡å™¨</button>

        <div id="test-results"></div>

        <div class="info">
            <h3>ğŸ› ï¸ æ•…éšœæ’é™¤</h3>
            <ol>
                <li><strong>åç«¯æœåŠ¡æœªå¯åŠ¨</strong>ï¼šè¿è¡Œ <code>python backend/minimal_server.py</code></li>
                <li><strong>ç«¯å£è¢«å ç”¨</strong>ï¼šæ£€æŸ¥8000å’Œ8080ç«¯å£æ˜¯å¦è¢«å…¶ä»–ç¨‹åºå ç”¨</li>
                <li><strong>ä¾èµ–ç¼ºå¤±</strong>ï¼šè¿è¡Œ <code>pip install fastapi uvicorn</code></li>
                <li><strong>Pythonç¯å¢ƒé—®é¢˜</strong>ï¼šç¡®ä¿Python 3.7+å·²æ­£ç¡®å®‰è£…</li>
            </ol>
        </div>

        <div class="success">
            <h3>âœ… å¿«é€Ÿå¯åŠ¨æŒ‡å—</h3>
            <p><strong>æ–¹æ³•1 - ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š</strong></p>
            <pre>python start_services.py</pre>
            
            <p><strong>æ–¹æ³•2 - æ‰‹åŠ¨å¯åŠ¨ï¼š</strong></p>
            <pre>
# ç»ˆç«¯1 - å¯åŠ¨åç«¯
python backend/minimal_server.py

# ç»ˆç«¯2 - å¯åŠ¨å‰ç«¯ï¼ˆå¯é€‰ï¼‰
python -m http.server 8080
            </pre>
        </div>
    </div>

    <script>
        function addTestResult(message, type = 'info') {
            const resultsDiv = document.getElementById('test-results');
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${type}`;
            resultDiv.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            resultsDiv.appendChild(resultDiv);
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        async function testBackendHealth() {
            addTestResult('æ­£åœ¨æµ‹è¯•åç«¯å¥åº·çŠ¶æ€... <span class="loading"></span>');
            
            try {
                const response = await fetch('http://localhost:8000/health');
                if (response.ok) {
                    const data = await response.json();
                    addTestResult(`âœ… åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ - çŠ¶æ€: ${data.status}`, 'success');
                } else {
                    addTestResult(`âŒ åç«¯æœåŠ¡å“åº”å¼‚å¸¸ - çŠ¶æ€ç : ${response.status}`, 'error');
                }
            } catch (error) {
                addTestResult(`âŒ æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡ - ${error.message}`, 'error');
                addTestResult('ğŸ’¡ è¯·ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨: python backend/minimal_server.py', 'warning');
            }
        }

        async function testMarketData() {
            addTestResult('æ­£åœ¨æµ‹è¯•å¸‚åœºæ•°æ®API... <span class="loading"></span>');
            
            try {
                const response = await fetch('http://localhost:8000/api/market/data/BTCUSDT');
                if (response.ok) {
                    const data = await response.json();
                    addTestResult(`âœ… å¸‚åœºæ•°æ®APIæ­£å¸¸ - BTCä»·æ ¼: $${data.data?.binance?.price || 'N/A'}`, 'success');
                } else {
                    addTestResult(`âŒ å¸‚åœºæ•°æ®APIå¼‚å¸¸ - çŠ¶æ€ç : ${response.status}`, 'error');
                }
            } catch (error) {
                addTestResult(`âŒ å¸‚åœºæ•°æ®APIè¿æ¥å¤±è´¥ - ${error.message}`, 'error');
            }
        }

        async function testAuth() {
            addTestResult('æ­£åœ¨æµ‹è¯•è®¤è¯API... <span class="loading"></span>');
            
            try {
                const response = await fetch('http://localhost:8000/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: 'demo@example.com',
                        password: 'demo123'
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    addTestResult(`âœ… è®¤è¯APIæ­£å¸¸ - æ¼”ç¤ºè´¦å·ç™»å½•æˆåŠŸ`, 'success');
                } else {
                    addTestResult(`âŒ è®¤è¯APIå¼‚å¸¸ - çŠ¶æ€ç : ${response.status}`, 'error');
                }
            } catch (error) {
                addTestResult(`âŒ è®¤è¯APIè¿æ¥å¤±è´¥ - ${error.message}`, 'error');
            }
        }

        function startMockServer() {
            addTestResult('ğŸš€ æ­£åœ¨å¯åŠ¨æ¨¡æ‹ŸæœåŠ¡å™¨...', 'info');
            addTestResult('è¯·åœ¨ç»ˆç«¯è¿è¡Œ: python backend/minimal_server.py', 'warning');
            addTestResult('æˆ–è€…è¿è¡Œ: python start_services.py', 'warning');
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.onload = function() {
            addTestResult('ğŸ” å¼€å§‹è‡ªåŠ¨æ£€æµ‹æœåŠ¡çŠ¶æ€...', 'info');
            setTimeout(testBackendHealth, 1000);
        };
    </script>
</body>
</html>
